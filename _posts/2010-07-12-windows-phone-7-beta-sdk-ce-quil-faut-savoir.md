---
layout: post
title: Windows Phone 7 Beta SDK : Ce qu’il faut savoir
slug: windows-phone-7-beta-sdk-ce-quil-faut-savoir
date: 2010-07-12 11:23:04Z
---

<p>Microsoft vient <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=c8496c2a-54d9-4b11-9491-a1bfaf32f2e3&amp;displaylang=en">tout juste de publier</a> la version Bêta du SDK de Windows Phone 7. Il y a bon nombre de changement et <strong>votre code risque fort de ne plus fonctionner !</strong> Voici la liste des changements à effectuer dans votre code pour convertir votre projet de la version CTP D’avril à cette version Beta.</p>  <blockquote>   <p><strong>Pourquoi autant de changements ?</strong> Rappelez-vous, jsuqu’à présent nous n’étions qu’à une version CTP – Community Technology <u>Preview – </u>et le mot “preview” a toute son importance ! Passer à la version bêta publique est un gage de plus de stabilité, mais attendez-vous à encore quelques changements dans votre code avec les futures versions ;)</p> </blockquote>  <h2>&#160;</h2>  <h3>1. Résoudre les références</h3>  <p>Il y avait un paquet d’assemblies à référencer : Microsoft.Phone.Controls, Microsoft.Phone.Controls.Navigation, etc.. Tout est désormais regroupé dans une seule assemblie : <strong>Microsoft.Phone.</strong> Il vous faudra donc supprimer toutes les anciennes références&#160; en Microsoft.Phone.* et les remplacer par la nouvelle. System.Device.Location a été&#160; migrée vers System.Device et Microsoft.Devices vers Microsoft.Phone.</p>  <p>Le code XAML est également affecté, et les déclarations xmlns doivent être modifiées en conséquence. Pour cela, vous pouvez effectuer une recherche globale sur les chaînes suivantes (la liste n’est pas exhaustive):</p>  <table border="0" cellspacing="0" cellpadding="2" width="539"><tbody>     <tr>       <td valign="top" width="59"><strong>Rechercher…</strong></td>        <td valign="top" width="478"><strong>et le remplacer par …</strong></td>     </tr>      <tr>       <td valign="top" width="59">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Navigation</td>        <td valign="top" width="478">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone</td>     </tr>      <tr>       <td valign="top" width="59">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.WebBrowser</td>        <td valign="top" width="478">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone</td>     </tr>      <tr>       <td valign="top" width="59">clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone.Shell</td>        <td valign="top" width="478">clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone</td>     </tr>      <tr>       <td valign="top" width="59">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls</td>        <td valign="top" width="478">clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone</td>     </tr>   </tbody></table>  <h3></h3>  <h3>&#160;</h3>  <h3>2. Résoudre les thèmes et les ressources</h3>  <p>Application.Resources a été supprimé du fichier App.xaml et les templates ont été modifiés. Il vous faut donc : </p>  <ul>   <li>ouvrir le fichier App.xaml et supprimer le noeud <em>Application.Resources</em>,</li>    <li>Effectuer une recherche globale pour remplacer les styles suivants :</li> </ul>  <p><a href="http://blog.maneu.net/wp-content/uploads/2010/07/image1.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://blog.maneu.net/wp-content/uploads/2010/07/image_thumb1.png" width="606" height="140" /></a> </p>  <p>Les effets XAML (DropShadow, Blur) ne sont plus disponibles. Cela ne casse pas votre code, mais ils n’apparaîtrons plus. A l’heure actuelle, on ne sait pas si ces effets seront à nouveau disponibles d’ici la sortie de la version finale.</p>  <h3>3. Corriger le fichier WMAppManifest.xml</h3>  <p>La meilleure manière de faire…est de copier le contenu d’un fichier WMAppManifest.xml provenant d’un nouveau&#160; projet, mais, si vous souhaitez effectuer les modifications à la main, voici ce qu’il faut faire : </p>  <ul>   <li>Dans les projets XNA, supprimer l’attribut <em>PlaceHolderString=”DefaultTask”,</em></li>    <li>La valeur de l’attribut <em>Genre </em>de l’élément <em>App </em>doit désormais être <em>Apps.Normal,</em></li>    <li>La valeur de l’attribut <em>RuntimeType </em>de l’élément <em>App </em>doit désormais être <em>Silverlight </em>(le L de Silverlight était en Majuscule dans la version précédente :),</li> </ul>  <h3></h3>  <h3>&#160;</h3>  <h3>4. Supprimer les anciennes bidouilles</h3>  <p>Pour la version d’Avril, certaines bidouilles étaient nécessaires, mais ce n’est plus le cas !</p>  <ul>   <li>Supprimer la vérification 0 == ManipulationDeltaEventArgs.*.Scale,</li>    <li>Vous pouvez à nouveau référencer des assemblies signées,</li>    <li>Le changement d’orientation a été corrigé et c’est désormais l’application frame qui est orientée.</li> </ul>  <p>&#160;</p>  <h3>5. Changer certains contrôles </h3>  <p>Exit la ListView, ListViewItem (“remplacé” par listbox), ainsi que les ToggleControlSwitch/ToggleControlButton. Vous devez utiliser un ToggleButton à la place.</p>  <p>&#160;</p>  <p>Il ne vous reste plus qu’à profiter de ce nouveau SDK ;)</p>  <p>&#160;</p>  <p><em>Ce post est une traduction partielle de “<a href="http://blogs.msdn.com/b/jaimer/archive/2010/06/28/migrating-apps-from-windows-phone-ctps-to-the-beta-build.aspx">Migrating apps from Windows Phone April CTP Refresh to the beta build</a>”</em></p>
